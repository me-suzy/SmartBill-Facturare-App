<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartBill - Configurare</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .config-container {
            padding: 30px;
        }
        
        .config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .config-title {
            font-size: 24px;
            color: var(--dark);
            font-weight: 300;
        }
        
        .config-tabs {
            display: flex;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .config-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }
        
        .config-tab.active {
            background: var(--primary);
            color: white;
            border-bottom-color: var(--primary-dark);
        }
        
        .config-tab:hover:not(.active) {
            background: #f8f9fa;
        }
        
        .config-content {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 30px;
        }
        
        .config-section {
            display: none;
        }
        
        .config-section.active {
            display: block;
        }
        
        .section-title {
            font-size: 20px;
            color: var(--dark);
            margin-bottom: 25px;
            font-weight: 500;
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 14px;
            transition: var(--transition);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }
        
        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        .form-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .form-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        .form-checkbox label {
            font-size: 14px;
            color: var(--dark);
            cursor: pointer;
        }
        
        .config-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .btn-success:hover {
            background: #229954;
        }
        
        .config-preview {
            background: #f8f9fa;
            border: 2px dashed var(--border);
            padding: 20px;
            border-radius: var(--radius);
            margin-top: 20px;
        }
        
        .preview-title {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .preview-content {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
        
        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: var(--transition);
        }
        
        .color-option.active {
            border-color: var(--dark);
        }
        
        .color-blue { background: #3498db; }
        .color-green { background: #27ae60; }
        .color-purple { background: #9b59b6; }
        .color-orange { background: #e67e22; }
        .color-red { background: #e74c3c; }
        
        .backup-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: var(--radius);
            margin-top: 20px;
        }
        
        .backup-title {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .backup-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .backup-btn {
            background: var(--warning);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .backup-btn:hover {
            background: #e67e22;
        }
        
        .backup-btn.restore {
            background: var(--danger);
        }
        
        .backup-btn.restore:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <h2>üí∞ SmartBill</h2>
                <span>FACTURARE</span>
            </div>
            <nav class="nav-menu">
                <a href="/dashboard" class="nav-item">üìä Dashboard</a>
                <div class="nav-group">
                    <span class="nav-title">üìÑ Emitere</span>
                    <a href="/factura" class="nav-subitem">FacturƒÉ</a>
                    <a href="/bon-fiscal" class="nav-subitem">Bon Fiscal</a>
                    <a href="/factura-storno" class="nav-subitem">FacturƒÉ Storno</a>
                </div>
                <a href="/rapoarte" class="nav-item">üìà Rapoarte</a>
                <a href="/configurare" class="nav-item active">‚öôÔ∏è Configurare</a>
                <div class="nav-group">
                    <span class="nav-title">üìù Nomenclatoare</span>
                    <a href="/produse" class="nav-subitem">Produse</a>
                    <a href="/clienti" class="nav-subitem">Clien»õi</a>
                </div>
            </nav>
        </div>

        <div class="main-content">
            <header>
                <h1>Configurare</h1>
                <div class="user-info">
                    <span>TIP B. SRL</span>
                </div>
            </header>

            <div class="config-container">
                <div class="config-header">
                    <h2 class="config-title">SetƒÉri Aplica»õie</h2>
                </div>

                <!-- Tab-uri -->
                <div class="config-tabs">
                    <div class="config-tab active" onclick="showTab('company')">
                        üè¢ Informa»õii Companie
                    </div>
                    <div class="config-tab" onclick="showTab('billing')">
                        üìÑ SetƒÉri Facturare
                    </div>
                    <div class="config-tab" onclick="showTab('system')">
                        ‚öôÔ∏è SetƒÉri Sistem
                    </div>
                </div>

                <!-- Con»õinut Configurare -->
                <div class="config-content">
                    <!-- Informa»õii Companie -->
                    <div class="config-section active" id="company-section">
                        <h3 class="section-title">Informa»õii Companie</h3>
                        <form id="companyForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Nume Companie</label>
                                    <input type="text" class="form-input" id="companyName" value="TIP B. SRL" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">CIF</label>
                                    <input type="text" class="form-input" id="companyCIF" value="RO12345678" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Nr. Reg. Com.</label>
                                    <input type="text" class="form-input" id="companyRegCom" value="J40/1234/2020">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Telefon</label>
                                    <input type="tel" class="form-input" id="companyPhone" value="021 123 4567">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-input" id="companyEmail" value="office@tipb.ro">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Website</label>
                                    <input type="text" class="form-input" id="companyWebsite" value="www.tipb.ro" placeholder="ex: www.tipb.ro sau https://www.tipb.ro">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Adresa CompletƒÉ</label>
                                <textarea class="form-textarea" id="companyAddress" rows="3">Str. Exemplu, Nr. 123, Bucure»ôti</textarea>
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Cont Bancar</label>
                                    <input type="text" class="form-input" id="companyBankAccount" value="RO49 AAAA 1B31 0075 9384 0000">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">BancƒÉ</label>
                                    <input type="text" class="form-input" id="companyBank" value="Banca Transilvania">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Capital Social</label>
                                    <input type="text" class="form-input" id="companyCapital" value="10000 RON">
                                </div>
                            </div>
                            
                            <div class="config-preview">
                                <div class="preview-title">Previzualizare Antet FacturƒÉ</div>
                                <div class="preview-content" id="companyPreview">
                                    <strong>TIP B. SRL</strong><br>
                                    CIF: RO12345678 | Nr. Reg. Com.: J40/1234/2020<br>
                                    Adresa: Str. Exemplu, Nr. 123, Bucure»ôti<br>
                                    Tel: 021 123 4567 | Email: office@tipb.ro<br>
                                    Cont: RO49 AAAA 1B31 0075 9384 0000<br>
                                    Banca: Banca Transilvania
                                </div>
                            </div>
                            
                            <div class="config-actions">
                                <button type="button" class="btn-secondary" onclick="resetCompanyForm()">ReseteazƒÉ</button>
                                <button type="submit" class="btn-success">SalveazƒÉ SetƒÉri</button>
                            </div>
                        </form>
                    </div>

                    <!-- SetƒÉri Facturare -->
                    <div class="config-section" id="billing-section">
                        <h3 class="section-title">SetƒÉri Facturare</h3>
                        <form id="billingForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Serie Facturi</label>
                                    <input type="text" class="form-input" id="invoiceSeries" value="FACT">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Serie Bonuri Fiscale</label>
                                    <input type="text" class="form-input" id="receiptSeries" value="BF">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Procent TVA (%)</label>
                                    <input type="number" class="form-input" id="tvaPercentage" value="19" min="0" max="100">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Termen de PlatƒÉ (zile)</label>
                                    <input type="number" class="form-input" id="paymentTerm" value="30" min="1">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">MonedƒÉ</label>
                                    <select class="form-select" id="currency">
                                        <option value="RON">RON (Leu rom√¢nesc)</option>
                                        <option value="EUR">EUR (Euro)</option>
                                        <option value="USD">USD (Dolar american)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Curs de Schimb</label>
                                    <input type="number" class="form-input" id="exchangeRate" value="1.00" step="0.01">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Header FacturƒÉ</label>
                                <textarea class="form-textarea" id="invoiceHeader" rows="2">Factura pentru serviciile prestate</textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Footer FacturƒÉ</label>
                                <textarea class="form-textarea" id="invoiceFooter" rows="2">Mul»õumim pentru √Æncredere!</textarea>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="autoNumbering" checked>
                                <label for="autoNumbering">Numerotare automatƒÉ facturi</label>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="requireStamp" checked>
                                <label for="requireStamp">StampilƒÉ obligatorie pe facturi</label>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="tvaIncluded" checked>
                                <label for="tvaIncluded">Pre»õurile includ TVA</label>
                            </div>
                            
                            <div class="config-actions">
                                <button type="button" class="btn-secondary" onclick="resetBillingForm()">ReseteazƒÉ</button>
                                <button type="submit" class="btn-success">SalveazƒÉ SetƒÉri</button>
                            </div>
                        </form>
                    </div>

                    <!-- SetƒÉri Sistem -->
                    <div class="config-section" id="system-section">
                        <h3 class="section-title">SetƒÉri Sistem</h3>
                        <form id="systemForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">LimbƒÉ Interfa»õƒÉ</label>
                                    <select class="form-select" id="language">
                                        <option value="ro">Rom√¢nƒÉ</option>
                                        <option value="en">English</option>
                                        <option value="fr">Fran√ßais</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Fus Orar</label>
                                    <select class="form-select" id="timezone">
                                        <option value="Europe/Bucharest">Europe/Bucharest (GMT+2)</option>
                                        <option value="UTC">UTC (GMT+0)</option>
                                        <option value="America/New_York">America/New_York (GMT-5)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Format Data</label>
                                    <select class="form-select" id="dateFormat">
                                        <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                        <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                        <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Format OrƒÉ</label>
                                    <select class="form-select" id="timeFormat">
                                        <option value="HH:MM">24 ore (HH:MM)</option>
                                        <option value="hh:mm A">12 ore (hh:mm AM/PM)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">TemƒÉ Culoare</label>
                                <div class="color-picker">
                                    <div class="color-option color-blue active" onclick="selectColor('blue')"></div>
                                    <div class="color-option color-green" onclick="selectColor('green')"></div>
                                    <div class="color-option color-purple" onclick="selectColor('purple')"></div>
                                    <div class="color-option color-orange" onclick="selectColor('orange')"></div>
                                    <div class="color-option color-red" onclick="selectColor('red')"></div>
                                </div>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="autoSave" checked>
                                <label for="autoSave">Salvare automatƒÉ</label>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="emailNotifications" checked>
                                <label for="emailNotifications">NotificƒÉri email</label>
                            </div>
                            
                            <div class="form-checkbox">
                                <input type="checkbox" id="autoBackup" checked>
                                <label for="autoBackup">Backup automat</label>
                            </div>
                            
                            <div class="backup-section">
                                <div class="backup-title">Backup »ôi Restaurare</div>
                                <div class="backup-actions">
                                    <button type="button" class="backup-btn" onclick="createBackup()">
                                        üíæ CreeazƒÉ Backup
                                    </button>
                                    <button type="button" class="backup-btn restore" onclick="restoreBackup()">
                                        üîÑ RestaureazƒÉ
                                    </button>
                                    <button type="button" class="backup-btn" onclick="exportData()">
                                        üì§ Export Date
                                    </button>
                                    <button type="button" class="backup-btn" onclick="importData()">
                                        üì• Import Date
                                    </button>
                                </div>
                            </div>
                            
                            <div class="config-actions">
                                <button type="button" class="btn-secondary" onclick="resetSystemForm()">ReseteazƒÉ</button>
                                <button type="submit" class="btn-success">SalveazƒÉ SetƒÉri</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Initialize toastr
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "timeOut": "5000",
            "extendedTimeOut": "2000"
        };

        let currentTab = 'company';
        let currentColor = 'blue';

        // Func»õii pentru tab-uri
        function showTab(tabName) {
            // Ascunde toate sec»õiunile
            document.querySelectorAll('.config-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // EliminƒÉ clasa active de la toate tab-urile
            document.querySelectorAll('.config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afi»ôeazƒÉ sec»õiunea selectatƒÉ
            document.getElementById(`${tabName}-section`).classList.add('active');
            
            // MarcheazƒÉ tab-ul ca activ
            event.target.classList.add('active');
            
            currentTab = tabName;
        }

        // Func»õii pentru formulare
        function resetCompanyForm() {
            document.getElementById('companyForm').reset();
            updateCompanyPreview();
        }

        function resetBillingForm() {
            document.getElementById('billingForm').reset();
        }

        function resetSystemForm() {
            document.getElementById('systemForm').reset();
        }

        // ActualizeazƒÉ previzualizarea companiei
        function updateCompanyPreview() {
            const name = document.getElementById('companyName').value || 'TIP B. SRL';
            const cif = document.getElementById('companyCIF').value || 'RO12345678';
            const regCom = document.getElementById('companyRegCom').value || 'J40/1234/2020';
            const address = document.getElementById('companyAddress').value || 'Str. Exemplu, Nr. 123, Bucure»ôti';
            const phone = document.getElementById('companyPhone').value || '021 123 4567';
            const email = document.getElementById('companyEmail').value || 'office@tipb.ro';
            const website = document.getElementById('companyWebsite').value || 'www.tipb.ro';
            const bankAccount = document.getElementById('companyBankAccount').value || 'RO49 AAAA 1B31 0075 9384 0000';
            const bank = document.getElementById('companyBank').value || 'Banca Transilvania';
            
            const websiteDisplay = website ? ` | Website: ${website}` : '';
            
            document.getElementById('companyPreview').innerHTML = `
                <strong>${name}</strong><br>
                CIF: ${cif} | Nr. Reg. Com.: ${regCom}<br>
                Adresa: ${address}<br>
                Tel: ${phone} | Email: ${email}${websiteDisplay}<br>
                Cont: ${bankAccount}<br>
                Banca: ${bank}
            `;
        }

        // Selectare culoare
        function selectColor(color) {
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('active');
            });
            
            event.target.classList.add('active');
            currentColor = color;
            
            // Aici ar trebui sƒÉ se schimbe tema aplica»õiei
            toastr.info(`Tema schimbatƒÉ √Æn ${color}`);
        }

        // Func»õii backup
        function createBackup() {
            toastr.info('Backup-ul va fi creat √Æn directorul /backup/');
        }

        function restoreBackup() {
            if (confirm('E»ôti sigur cƒÉ vrei sƒÉ restaurezi datele? AceastƒÉ ac»õiune va suprascrie datele curente.')) {
                toastr.info('Restaurarea va fi efectuatƒÉ din ultimul backup disponibil');
            }
        }

        function exportData() {
            toastr.info('Datele vor fi exportate √Æn format Excel');
        }

        function importData() {
            toastr.info('SelecteazƒÉ fi»ôierul cu datele de importat');
        }

        // Func»õie pentru formatarea URL-ului
        function formatWebsiteUrl(url) {
            if (!url) return '';
            
            // DacƒÉ URL-ul nu √Æncepe cu http:// sau https://, adaugƒÉ https://
            if (!url.match(/^https?:\/\//)) {
                return 'https://' + url;
            }
            
            return url;
        }

        // Event listeners pentru formulare
        document.getElementById('companyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const companyData = {
                company_name: document.getElementById('companyName').value,
                company_cif: document.getElementById('companyCIF').value,
                company_address: document.getElementById('companyAddress').value,
                company_phone: document.getElementById('companyPhone').value,
                company_email: document.getElementById('companyEmail').value,
                company_website: formatWebsiteUrl(document.getElementById('companyWebsite').value),
                bank_account: document.getElementById('companyBankAccount').value,
                bank_name: document.getElementById('companyBank').value,
                tva_rate: 19,
                currency: 'RON'
            };

            console.log('Trimit datele companiei:', companyData);
            
            fetch('/api/update_config', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(companyData)
            })
            .then(response => {
                console.log('RƒÉspuns configurare primit:', response);
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    toastr.success(data.message, 'Salvare reu»ôitƒÉ');
                    
                    // Mesajul dispare automat dupƒÉ 2 secunde
                    setTimeout(() => {
                        toastr.clear();
                    }, 2000);
                } else {
                    toastr.error(data.message);
                }
            })
            .catch(error => {
                console.error('Eroare la salvare:', error);
                toastr.error('Nu s-a putut salva configurarea: ' + error.message);
            });
        });

        document.getElementById('billingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const billingData = {
                invoiceSeries: document.getElementById('invoiceSeries').value,
                receiptSeries: document.getElementById('receiptSeries').value,
                tvaPercentage: document.getElementById('tvaPercentage').value,
                paymentTerm: document.getElementById('paymentTerm').value,
                currency: document.getElementById('currency').value,
                exchangeRate: document.getElementById('exchangeRate').value,
                invoiceHeader: document.getElementById('invoiceHeader').value,
                invoiceFooter: document.getElementById('invoiceFooter').value,
                autoNumbering: document.getElementById('autoNumbering').checked,
                requireStamp: document.getElementById('requireStamp').checked,
                tvaIncluded: document.getElementById('tvaIncluded').checked
            };

            toastr.success('SetƒÉrile de facturare au fost salvate cu succes!', 'Salvare reu»ôitƒÉ');
            
            // Mesajul dispare automat dupƒÉ 2 secunde
            setTimeout(() => {
                toastr.clear();
            }, 2000);
        });

        document.getElementById('systemForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const systemData = {
                language: document.getElementById('language').value,
                timezone: document.getElementById('timezone').value,
                dateFormat: document.getElementById('dateFormat').value,
                timeFormat: document.getElementById('timeFormat').value,
                theme: currentColor,
                autoSave: document.getElementById('autoSave').checked,
                emailNotifications: document.getElementById('emailNotifications').checked,
                autoBackup: document.getElementById('autoBackup').checked
            };

            toastr.success('SetƒÉrile sistemului au fost salvate cu succes!', 'Salvare reu»ôitƒÉ');
            
            // Mesajul dispare automat dupƒÉ 2 secunde
            setTimeout(() => {
                toastr.clear();
            }, 2000);
        });

        // ActualizeazƒÉ previzualizarea c√¢nd se schimbƒÉ c√¢mpurile
        document.querySelectorAll('#companyForm input, #companyForm textarea').forEach(input => {
            input.addEventListener('input', updateCompanyPreview);
        });

        // √éncarcƒÉ setƒÉrile la pornirea paginii
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
            updateCompanyPreview();
        });

        function loadConfig() {
            console.log('√éncarc configurarea...');
            fetch('/api/get_config')
                .then(response => {
                    console.log('RƒÉspuns configurare primit:', response);
                    return response.json();
                })
                .then(data => {
                    console.log('Configurare √ÆncƒÉrcatƒÉ:', data);
                    
                    // PopuleazƒÉ formularul cu datele existente
                    if (data.Nume_Companie) {
                        document.getElementById('companyName').value = data.Nume_Companie;
                        document.getElementById('companyCIF').value = data.CIF || '';
                        document.getElementById('companyAddress').value = data.Adresa || '';
                        document.getElementById('companyPhone').value = data.Telefon || '';
                        document.getElementById('companyEmail').value = data.Email || '';
                        document.getElementById('companyWebsite').value = data.Website || '';
                        document.getElementById('companyBankAccount').value = data.Cont_Bancar || '';
                        document.getElementById('companyBank').value = data.Banca || '';
                        
                        updateCompanyPreview();
                    }
                })
                .catch(error => {
                    console.error('Eroare la √ÆncƒÉrcarea configurarei:', error);
                });
        }
    </script>
</body>
</html>